{% extends 'user/blank_layout.html' %}
{% block banner %}
{% endblock banner %}
{% block content %}
    <div class="checkbuy-container">
        <div class="checkbuy-header">
            <h1>Checkout</h1>   
        </div>

        <div class="checkbuy-content">
            <div class="checkbuy-main">
                <div class="checkbuy-section product-section">
                    <h2>Product Details</h2>
                    
                    <div class="checkbuy-product-details">
                        <div class="checkbuy-product-image">
                            <img src="/api/placeholder/400/400" alt="Product Image">
                            <span class="checkbuy-product-quantity">1</span>
                        </div>
                        <div class="checkbuy-product-info">
                            <h3>Premium Running Shoes</h3>
                            <div class="checkbuy-price-container">
                                <div>
                                    <span class="checkbuy-product-original-price"><i class='bx bx-rupee'></i>3,999.00</span>
                                    <span class="checkbuy-product-price"><i class='bx bx-rupee'></i>2,999.00</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                </div>

                <div class="checkbuy-section shipping-section">
                    <h2>Shipping Information</h2>
                    
                    <div class="checkbuy-form-group">
                        <h3>Select Shipping Address</h3>
                        <div class="checkbuy-address-list">
                            <div class="checkbuy-address-item">
                                <input type="radio" id="address-1" name="address_id" value="1" required checked>
                                <label class="checkbuy-address" for="address-1">
                                    <strong>Home</strong><br>
                                    John Doe <br>
                                    123 Main Street, Apt 4B<br>
                                    New Delhi, 110001<br>
                                    Phone: +91 98765 43210
                                </label>
                            </div>
                            <div class="checkbuy-address-item">
                                <input type="radio" id="address-2" name="address_id" value="2" required>
                                <label class="checkbuy-address" for="address-2">
                                    <strong>Office</strong><br>
                                    John Doe <br>
                                    456 Business Park, Building C<br>
                                    Gurugram, 122001<br>
                                    Phone: +91 98765 12345
                                </label>
                            </div>
                        </div>
                    </div>

                    <form method="POST" action="#" class="checkbuy-form">
                        <input type="hidden" name="address_id" id="selected_address_id" value="1">
                        <input type="hidden" name="product_id" value="123">
                        <input type="hidden" name="selected_size" id="selected_size">
                        <input type="hidden" name="selected_quantity" id="selected_quantity" value="1">
                        
                        <div class="checkbuy-actions">
                            <a href="#" class="back-btn">Back to Product</a>
                            <button type="submit" class="continue-btn">Place Order</button>
                        </div>
                    </form>
                </div>
            </div>

            <div class="checkbuy-sidebar">
                <div class="checkbuy-order-summary">
                    <h2>Order Summary</h2>
                    
                    <div class="checkbuy-summary-row">
                        <span>Product Price</span>
                        <span><i class='bx bx-rupee'></i>2,999.00</span>
                    </div>
                    <div class="checkbuy-summary-row">
                        <span>Quantity</span>
                        <span id="summary-quantity">1</span>
                    </div>
                    
                    <div class="checkbuy-summary-divider"></div>
                    
                    <div class="checkbuy-summary-row">
                        <span>Subtotal</span>
                        <span id="summary-subtotal"><i class='bx bx-rupee'></i>2,999.00</span>
                    </div>
                    <div class="checkbuy-summary-row">
                        <span>Shipping</span>
                        <span id="shipping-cost">Free</span>
                    </div>
                    
                    <div class="checkbuy-summary-divider"></div>
                    
                    <div class="checkbuy-summary-row checkbuy-total-row">
                        <span>Total</span>
                        <span class="total-price" id="summary-total"><i class='bx bx-rupee'></i>2,999.00</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // When an address is selected, update the hidden input
        document.querySelectorAll('input[name="address_id"]').forEach(radio => {
            radio.addEventListener('change', function() {
                document.getElementById('selected_address_id').value = this.value;
            });
        });

        // Update quantity and total when quantity changes
        const quantityInput = document.getElementById('quantity');
        const sizeSelect = document.getElementById('size');
        const pricePerItem = 2999.00;

        quantityInput.addEventListener('change', updateSummary);
        sizeSelect.addEventListener('change', updateSelectedSize);

        function updateSummary() {
            const quantity = parseInt(quantityInput.value);
            const subtotal = pricePerItem * quantity;
            
            // Update hidden field
            document.getElementById('selected_quantity').value = quantity;
            
            // Update summary
            document.getElementById('summary-quantity').textContent = quantity;
            document.getElementById('summary-subtotal').innerHTML = `<i class='bx bx-rupee'></i>${subtotal.toFixed(2)}`;
            document.getElementById('summary-total').innerHTML = `<i class='bx bx-rupee'></i>${subtotal.toFixed(2)}`;
            
            // Update product quantity display
            document.querySelector('.product-quantity').textContent = quantity;
        }

        function updateSelectedSize() {
            document.getElementById('selected_size').value = sizeSelect.value;
        }
    </script>
{% endblock content %}
